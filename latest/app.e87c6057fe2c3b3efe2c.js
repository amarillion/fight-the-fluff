(()=>{"use strict";var t,e={880:(t,e,s)=>{var i=s(260),n=s.n(i);const o=class extends n().Scene{constructor(){super({key:"BootScene"})}preload(){this.load.spritesheet("banana-spritesheet","./assets/images/Banana_1.png",{frameWidth:24}),this.load.spritesheet("fluff-spritesheet","./assets/images/Fluff_front1.png",{frameWidth:24}),this.load.spritesheet("crosshair-spritesheet","./assets/images/crosshair.png",{frameWidth:12}),this.load.spritesheet("laser-spritesheet","./assets/images/laser.png",{frameWidth:64,frameHeight:450}),this.load.image("startgate","./assets/images/Ship.png"),this.load.image("cloud","./assets/images/cloud.png"),this.load.image("endgate","./assets/images/tower.png"),this.load.image("projectile","./assets/images/projectile.png"),this.load.audio("music",["./assets/music/march_of_the_fluff.mp3"]),this.load.audio("sfx-laser","./assets/sfx/Laser_Cannon-Mike_Koenig-797224747.wav"),this.load.audio("sfx-banana-spawn","./assets/sfx/connect.wav"),this.load.audio("sfx-banana-tower","./assets/sfx/explode3.wav"),this.load.audio("sfx-cannon-shoot","./assets/sfx/shoot1.wav"),this.load.audio("sfx-cannon-hit","./assets/sfx/thud.wav"),this.load.audio("sfx-cannon-target","./assets/sfx/confirm.wav"),this.load.audio("sfx-tile-place","./assets/sfx/blockplace.wav"),this.load.audio("sfx-tile-pickup","./assets/sfx/newdelete.wav"),this.load.audio("sfx-tile-deny","./assets/sfx/denied.wav"),this.load.audio("sfx-fluff-appear","./assets/sfx/laser.ogg"),this.load.audio("sfx-fluff-shake","./assets/sfx/lose.wav"),this.load.audio("sfx-fluff-throw","./assets/sfx/jump1.wav"),this.load.audio("sfx-tower-destroyed","./assets/sfx/expl04.wav")}create(){this.scene.start("MenuScene")}};var a=s(890),r=s(8);class d{constructor(t,e,s,i,n,o,a,d){this.scorched=!1,this.isEndNode=!1,this.isStartNode=!1,this.mx=t,this.my=e,this.idx=s,this.unitXco=i,this.unitYco=n,this.xco=i+o.x*d,this.yco=n+o.y*d;const h=(0,r.vs)((0,r.Iu)(i,n),(0,r.bA)(d,d),(0,r.Iu)(o.x,o.y),(0,r.U1)(o.rotation));this.points=(0,r.qU)(h,a),this.cx=this.points.reduce(((t,e)=>t+e.x),0)/this.points.length,this.cy=this.points.reduce(((t,e)=>t+e.y),0)/this.points.length,this.element=o,this.links=[]}canPickUp(){return!this.scorched&&!this.isEndNode&&!this.isStartNode}toString(){return`unit [${this.mx} ${this.my}] index: ${this.idx}`}static getLinks(t){return Object.entries(t.links)}static*getAdjacent(t){for(const e of d.getExits(t)){const s=e[1];for(const i of d.getExits(s))i[1]===t&&(yield e)}}static*getExits(t){const e=t.tile&&t.tile.connectionMask||0;let s=1;for(const i of d.getLinks(t))(e&s)>0&&(yield i),s*=2}}class h{constructor(t,e,s){this.x=t,this.y=e,this.grid=s,this.nodes=[]}push(t){this.nodes.push(t)}addPrimitiveUnit(t,e,s,i,n,o){const{primitiveUnit:a,unitSize:r,points:h}=n;let c=0;for(const n of a)this.push(new d(t,e,c++,s,i,n,h,o));this.xco=s,this.yco=i,this.unitSize=r}}class c extends a.Gn{constructor(t,e){super(t,e,((t,e,s)=>new h(t,e,s)))}initLinks(t){for(const e of this.eachNode()){const s=e.x,i=e.y;for(let n=0;n<t.length;++n){const o=e.nodes[n];if(o)for(const{dx:e,dy:a,idx:r}of t[n]){const t=s+e,n=i+a,d=this.get(t,n);if(!d)continue;const h=d.nodes[r];o.links.push(h)}}}}}var l=s(157),x=s(76),y=s(914);const p=64;class f{static overlapSingle(t,e){return t.z===e.z&&!(t.x>e.x+e.width||t.y>e.y+e.height||e.x>t.x+t.width||e.y>t.y+t.height)}static overlap(t,e,s){for(const i of t.getChildren())for(const t of e.getChildren())f.overlapSingle(i,t)&&s(i,t)}}class u extends(function(t){return class extends t{constructor(){super(...arguments),this.xx=0,this.yy=0,this.zz=0,this.prevX=0,this.prevY=0,this.gravity=!1,this.velocityX=0,this.velocityY=0,this.velocityZ=0,this.lifeRemain=-1}set velocity(t){this.velocityX=t.x,this.velocityY=t.y}preUpdate(t,e){super.preUpdate(t,e),this.prevX!==this.x&&(this.xx=this.x),this.prevY!==this.y&&(this.yy=this.y),this.xx+=this.velocityX/e,this.yy+=this.velocityY/e,this.zz+=this.velocityZ/e,this.gravity&&(this.velocityZ-=50/e),this.x=this.xx,this.y=this.yy-this.zz,this.depth=this.yy,(this.x<0||this.y<0||this.x>800||this.y>450)&&this.destroy(),this.prevX=this.x,this.prevY=this.y,this.lifeRemain>0&&(this.lifeRemain-=e,this.lifeRemain<0&&this.destroy())}}}(Phaser.GameObjects.Sprite)){}class g{constructor(t,e){this.src=t,this.dest=e,this.fraction=0}getPos(){const t=this.dest.cx-this.src.cx,e=this.dest.cy-this.src.cy;return{x:this.src.cx+this.fraction*t,y:this.src.cy+this.fraction*e}}reverse(){this.fraction=1-this.fraction,[this.src,this.dest]=[this.dest,this.src]}hasDestTile(){return!!this.dest.tile}hasDestExit(){return!!this.hasDestTile()&&!!y.F.of(d.getExits(this.dest)).map((t=>t[1])).find((t=>t===this.src))}}class m extends u{constructor({scene:t,node:e,asset:s}){super(t,e.cx,e.cy,s),this.node=e,this.stepsRemain=0,this.path=null,this.prevNode=null,this.halfwayCheckpoint=!1,this.actionCounter=0,this.scene=t}determineNextNode(){return null}onHalfWay(){this.path.hasDestTile()||this.destroy(),this.path.hasDestExit()||this.path.reverse()}onNodeReached(){}followPath(){if(!this.path){this.stepsRemain=this.action.time;const t=this.determineNextNode();if(!t)return void(this.action={type:"SIT",time:40});this.path=new g(this.node,t),this.halfwayCheckpoint=!1}this.path.fraction=1-this.stepsRemain/this.action.time;const t=this.path.getPos();this.x=t.x,this.y=t.y,!this.halfwayCheckpoint&&this.path.fraction>.5&&(this.onHalfWay(),this.halfwayCheckpoint=!0)}completeAction(){"MOVE"===this.action.type&&(this.prevNode=this.node,this.node=this.path.dest,this.path=null,this.onNodeReached()),"onComplete"in this.action&&this.action.onComplete()}determineNextAction(){return{type:"SIT",time:40}}preUpdate(t,e){super.preUpdate(t,e),this.action||(this.action=this.determineNextAction(),this.actionCounter++,this.stepsRemain=this.action.time),"MOVE"===this.action.type&&this.followPath(),"SHAKE"===this.action.type&&(this.x=this.node.cx+4*Math.sin(13*this.stepsRemain),this.y=this.node.cy+4*Math.cos(17*this.stepsRemain)),this.stepsRemain--,this.stepsRemain<=0&&(this.completeAction(),this.action=null)}}class b extends m{constructor({scene:t,node:e}){super({scene:t,node:e,asset:"fluff-spritesheet"}),this.play("fluff"),this.scene.playEffect("sfx-fluff-appear")}determineNextNode(){const t=y.F.of(d.getExits(this.node)).map((t=>t[1])).filter((t=>t!==this.prevNode)).collect();return(0,l.d4)(t)}determineNextAction(){if(this.actionCounter>50)return{type:"SIT",time:40,onComplete:()=>{this.destroy()}};const t=Math.min(.5,this.actionCounter/20);return Math.random()<t&&!this.node.isStartNode&&!this.node.isEndNode?{type:"SHAKE",time:120,onComplete:()=>{this.scene.destroyTile(this.node),this.destroy()}}:this.actionCounter%2==1?{type:"MOVE",time:80}:{type:"SIT",time:40}}onHalfWay(){this.path.hasDestTile()?this.path.hasDestExit()||(this.node.isStartNode||this.node.isEndNode||Math.random()>.5?this.path.reverse():(this.stepsRemain=120,this.action={type:"SHAKE",time:120,onComplete:()=>{this.scene.destroyTile(this.node),this.destroy()}})):this.path.reverse()}dragStart(){this.action={type:"SIT",time:1/0}}dragMove(t){t.x<0?this.visible=!1:(this.visible=!0,this.x=t.x,this.y=t.y)}dragRelease(t){const e=this.scene.findNodeAt(t.x,t.y);e&&e.tile?(this.node=e,this.path=null,this.action=null,this.x=e.cx,this.y=e.cy):this.dragCancel()}dragCancel(){this.scene.playEffect("sfx-fluff-throw"),this.destroy()}}class v extends m{constructor({scene:t,node:e}){super({scene:t,node:e,asset:"banana-spritesheet"}),this.prevPickedNodes=new Set,this.play("banana"),this.scene.playEffect("sfx-banana-spawn")}onNodeReached(){this.prevPickedNodes.add(this.node);for(const t of this.scene.towers.children.getArray())f.overlapSingle(this,t)&&(t.onHit(),this.scene.playEffect("sfx-banana-tower"),this.destroy())}determineNextNode(){const t=this.determineNextNodeHelper();return t&&this.prevPickedNodes.add(t),t}determineNextNodeHelper(){const t=y.F.of(d.getExits(this.node)).map((t=>t[1])).filter((t=>t!==this.prevNode)).collect();if(0===t.length)return void this.destroy();const e=t.filter((t=>t.tile&&!t.scorched));if(e.length>0){const t=e.filter((t=>!this.prevPickedNodes.has(t)));return t.length>0?(0,l.d4)(t):(0,l.d4)(e)}return(0,l.d4)(t)}determineNextAction(){return{type:"MOVE",time:40}}}const w=Math.sqrt(.75),S=Math.PI,k={CAIRO:function(){const t=.5+w,e=w-.5;return{points:[{x:0,y:0},{x:w,y:.5},{x:w-.5,y:w+.5},{x:.5-w,y:w+.5},{x:-w,y:.5}],primitiveUnit:[{x:0,y:0,rotation:0},{x:-e,y:t,rotation:.5*S},{x:0,y:2*t,rotation:S},{x:e,y:t,rotation:1.5*S},{x:2*w+0,y:2*w+0,rotation:0},{x:2*w-e,y:2*w+t,rotation:.5*S},{x:2*w+0,y:2*w+2*t,rotation:S},{x:2*w+e,y:2*w+t,rotation:1.5*S}],unitSize:[4*w,4*w],links:[[{dx:0,dy:-1,idx:5},{dx:0,dy:0,idx:3},{dx:0,dy:0,idx:2},{dx:0,dy:0,idx:1},{dx:-1,dy:-1,idx:7}],[{dx:0,dy:0,idx:2},{dx:-1,dy:0,idx:4},{dx:-1,dy:0,idx:3},{dx:-1,dy:-1,idx:6},{dx:0,dy:0,idx:0}],[{dx:-1,dy:0,idx:7},{dx:0,dy:0,idx:1},{dx:0,dy:0,idx:0},{dx:0,dy:0,idx:3},{dx:0,dy:0,idx:5}],[{dx:0,dy:0,idx:0},{dx:0,dy:-1,idx:6},{dx:1,dy:0,idx:1},{dx:0,dy:0,idx:4},{dx:0,dy:0,idx:2}],[{dx:1,dy:0,idx:1},{dx:0,dy:0,idx:7},{dx:0,dy:0,idx:6},{dx:0,dy:0,idx:5},{dx:0,dy:0,idx:3}],[{dx:0,dy:0,idx:6},{dx:0,dy:1,idx:0},{dx:-1,dy:0,idx:7},{dx:0,dy:0,idx:2},{dx:0,dy:0,idx:4}],[{dx:0,dy:1,idx:3},{dx:0,dy:0,idx:5},{dx:0,dy:0,idx:4},{dx:0,dy:0,idx:7},{dx:1,dy:1,idx:1}],[{dx:0,dy:0,idx:4},{dx:1,dy:0,idx:2},{dx:1,dy:0,idx:5},{dx:1,dy:1,idx:0},{dx:0,dy:0,idx:6}]],name:"CAIRO",sides:5,symmetry:1,rotationSteps:4}}(),DIAMOND:{points:[{x:0,y:0},{x:0,y:1},{x:w,y:1.5},{x:w,y:.5}],primitiveUnit:[{x:0,y:0,rotation:0},{x:2*w,y:0,rotation:2*S/3},{x:w,y:1.5,rotation:4*S/3},{x:-w,y:1.5,rotation:0},{x:w,y:1.5,rotation:2*S/3},{x:0,y:3,rotation:4*S/3}],unitSize:[2*w,3],links:[[{dx:0,dy:0,idx:1},{dx:0,dy:0,idx:2},{dx:0,dy:0,idx:4},{dx:-1,dy:0,idx:2}],[{dx:0,dy:0,idx:2},{dx:0,dy:0,idx:0},{dx:0,dy:-1,idx:5},{dx:1,dy:-1,idx:3}],[{dx:0,dy:0,idx:0},{dx:0,dy:0,idx:1},{dx:1,dy:0,idx:0},{dx:1,dy:0,idx:4}],[{dx:0,dy:0,idx:4},{dx:0,dy:0,idx:5},{dx:-1,dy:1,idx:1},{dx:-1,dy:0,idx:5}],[{dx:0,dy:0,idx:5},{dx:0,dy:0,idx:3},{dx:-1,dy:0,idx:2},{dx:0,dy:0,idx:0}],[{dx:0,dy:0,idx:3},{dx:0,dy:0,idx:4},{dx:1,dy:0,idx:3},{dx:0,dy:1,idx:1}]],name:"DIAMOND",sides:4,symmetry:2,rotationSteps:6},SQUARE:{points:[{x:0,y:0},{x:1.5,y:0},{x:1.5,y:1.5},{x:0,y:1.5}],primitiveUnit:[{x:0,y:0,rotation:0}],unitSize:[1.5,1.5],links:[[{dx:0,dy:-1,idx:0},{dx:1,dy:0,idx:0},{dx:0,dy:1,idx:0},{dx:-1,dy:0,idx:0}]],name:"SQUARE",sides:4,symmetry:4,rotationSteps:4},HEXAGONAL:{points:[{x:0,y:0},{x:0,y:1},{x:w,y:1.5},{x:2*w,y:1},{x:2*w,y:0},{x:w,y:-.5}],primitiveUnit:[{x:0,y:0,rotation:0},{x:-w,y:1.5,rotation:0}],unitSize:[2*w,3],links:[[{dx:1,dy:-1,idx:1},{dx:1,dy:0,idx:0},{dx:1,dy:0,idx:1},{dx:0,dy:0,idx:1},{dx:-1,dy:0,idx:0},{dx:0,dy:-1,idx:1}],[{dx:0,dy:0,idx:0},{dx:1,dy:0,idx:1},{dx:0,dy:1,idx:0},{dx:-1,dy:1,idx:0},{dx:-1,dy:0,idx:1},{dx:-1,dy:0,idx:0}]],name:"HEXAGONAL",sides:6,symmetry:6,rotationSteps:6},TRIANGULAR:{points:[{x:0,y:0},{x:1,y:2*w},{x:2,y:0}],primitiveUnit:[{x:0,y:0,rotation:0},{x:1,y:2*w,rotation:S},{x:-1,y:2*w,rotation:0},{x:2,y:4*w,rotation:S}],unitSize:[2,4*w],links:[[{dx:0,dy:-1,idx:3},{dx:1,dy:0,idx:1},{dx:0,dy:0,idx:1}],[{dx:0,dy:0,idx:2},{dx:-1,dy:0,idx:0},{dx:0,dy:0,idx:0}],[{dx:0,dy:0,idx:1},{dx:0,dy:0,idx:3},{dx:-1,dy:0,idx:3}],[{dx:0,dy:1,idx:0},{dx:0,dy:0,idx:2},{dx:1,dy:0,idx:2}]],name:"TRIANGULAR",sides:3,symmetry:3,rotationSteps:6}};class E{constructor(t){this.connectionMask=t,this.resKey=null,this.origin=null,this.center=null}}const T=function(){const t={};for(const e of Object.values(k)){t[e.name]=[];for(let s=0;s<Math.pow(2,e.sides);++s)t[e.name][s]=new E(s)}return t}();function N(t){return{x:t.reduce(((t,e)=>t+e.x),0)/t.length,y:t.reduce(((t,e)=>t+e.y),0)/t.length}}const P=2*Math.PI,C=t=>Math.round(180*t/Math.PI);function R(t){for(const e of Object.values(k))for(const s of T[e.name])L(s,t,e)}function L(t,e,s){const i=t.connectionMask,o=`tile-${s.name}-${i}`,a=e.make.graphics({x:0,y:0,add:!1}),{points:d}=s,h=N(d),c=function(t){return{top:Math.min(...t.map((t=>t.y))),left:Math.min(...t.map((t=>t.x))),bottom:Math.max(...t.map((t=>t.y))),right:Math.max(...t.map((t=>t.x)))}}(d),l=-c.left*p+8,x=-c.top*p+8,y=(c.right-c.left)*p+16,f=(c.bottom-c.top)*p+16;!function(t,e,s,i,o,a,d,h){const{points:c,links:l,primitiveUnit:x,unitSize:y}=i,f=N(c),u=(0,r.vs)((0,r.Iu)(e,s),(0,r.bA)(p,p)),g=(0,r.qU)(u,c),m=new(n().Geom.Polygon)(g);t.fillStyle(4500036),t.fillPoints(m.points,!0);const b=l[0];let v=1;for(const{dx:i,dy:n,idx:a}of b){if(0==(o&v)){v*=2;continue}v*=2,t.lineStyle(8,13421704);const d=x[a],h=i*y[0]+d.x,c=n*y[1]+d.y,l=(0,r.vs)((0,r.Iu)(e,s),(0,r.bA)(p,p),(0,r.Iu)(h,c),(0,r.U1)(d.rotation)),g=(0,r.hC)(u,f),m=(0,r.hC)(l,f);t.lineBetween(g.x,g.y,(m.x+g.x)/2,(m.y+g.y)/2)}t.lineStyle(3,3377203),t.strokePoints(m.points,!0)}(a,l,x,s,i),a.generateTexture(o,y,f),t.resKey=o,t.origin={x:l,y:x},t.center={x:l+h.x*p,y:x+h.y*p}}class M{constructor({scene:t,layer:e,x:s,y:i,w:n,h:o,value:a=0,max:r=1}){this.graphics=t.make.graphics({}),this.x=s,this.y=i,this.w=n,this.h=o,this.refresh(a,r),e.add(this.graphics)}refresh(t,e){this.graphics.clear(),this.graphics.fillStyle(8421504,.5),this.graphics.fillRect(this.x,this.y,this.w,this.h),this.graphics.fillStyle(16776960,1);const s=t/e;this.graphics.fillRect(this.x,this.y,this.w*s,this.h),this.graphics.lineStyle(3,8421504),this.graphics.strokeRect(this.x,this.y,this.w,this.h)}}var A=function(t,e,s,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(t,s):n?n.value=s:e.set(t,s),s},O=function(t,e,s,i){if("a"===s&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?i:"a"===s?i.call(t):i?i.value:e.get(t)};const I=2*Math.PI,D=class extends(function(t){var e,s,i,n;return n=class extends t{constructor(){super(...arguments),e.set(this,void 0),s.set(this,void 0),i.set(this,void 0)}initTile(t,n){A(this,e,t,"f"),A(this,i,T[n.name],"f"),A(this,s,n,"f")}rotateContents(t){const n=P/O(this,s,"f").symmetry;let o=O(this,e,"f").connectionMask;const a=O(this,s,"f").sides,r=Math.round(a/O(this,s,"f").symmetry);let d=this.rotation;-1===t?(o=function(t,e,s){const i=1<<s;let n=t;for(let t=0;t<e;++t)n<<=1,(n&i)>0&&(n-=i-1);return n}(o,r,a),d-=n):(o=function(t,e,s){const i=1<<s;let n=t;for(let t=0;t<e;++t)(1&n)>0&&(n+=i-1),n>>=1;return n}(o,r,a),d+=n),this.rotation=d,A(this,e,O(this,i,"f")[o],"f"),this.setTexture(O(this,e,"f").resKey)}matchRotation(t){const i=P/O(this,s,"f").symmetry;let n=t;const o=()=>function(t){const e=-Math.PI,s=Math.PI-e;return e+((t-e)%s+s)%s}(n-this.rotation);let a=0;for(;C(o())>C(i/2);)if(this.rotateContents(1),a++>6)throw new Error("Infinite loop detected");for(a=0;C(o())<C(-i/2);)if(this.rotateContents(-1),a++>6)throw new Error("Infinite loop detected");return n-this.rotation>Math.PI&&(n-=P),n-this.rotation<-Math.PI&&(n+=P),{targetRotation:n,tile:O(this,e,"f")}}},e=new WeakMap,s=new WeakMap,i=new WeakMap,n}(n().GameObjects.Sprite)){constructor({scene:t,x:e,y:s,tile:i}){super(t,e,s,i.resKey),this.grabPoint=null,this.initTile(i,t.tesselation),this.rotationBlocked=!1}preUpdate(){}dragStart(t){this.grabPoint={x:t.x-this.x,y:t.y-this.y}}dragMove(t){t.x<0?this.visible=!1:(this.visible=!0,this.x=t.x,this.y=t.y)}rotateLeft(){if(this.rotationBlocked)return;const t=this.scene.tesselation.rotationSteps,e=this.rotation-I/t;this.scene.tweens.add({targets:[this],duration:100,rotation:e,onComplete:()=>this.rotationBlocked=!1})}rotateRight(){if(this.rotationBlocked)return;const t=this.scene.tesselation.rotationSteps,e=this.rotation+I/t;this.scene.tweens.add({targets:[this],duration:100,rotation:e,onComplete:()=>this.rotationBlocked=!1})}dragCancel(){this.visible=!0;const t=this.scene;t.tweens.add({targets:[this],duration:200,x:t.control.x,y:t.control.y})}dropTile(t){const e=this.scene,{tile:s,targetRotation:i}=this.matchRotation(t.element.rotation);e.tweens.add({targets:[this],duration:300,x:t.cx,y:t.cy,rotation:i,onComplete:()=>{e.setTile(t,s),this.destroy()}}),e.playEffect("sfx-tile-place")}dragRelease(){const t=this.scene;if(t.controlContains({x:this.x,y:this.y}))return void this.dragCancel();const e=t.findNodeAt(this.x,this.y);e&&!e.tile?(this.dropTile(e),t.updateNextTile()):this.dragCancel()}};class G extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='\n\t\t<style>\n\t\t\t.Backdrop {\n\t\t\t\tbackground: #666;\n\t\t\t\theight: 100%;\n\t\t\t\tz-index: 1000;\n\t\t\t\twidth: 100%;\n\t\t\t}\n\n\t\t\t.Container {\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 100%;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\n\t\t\t\tposition: fixed;\n\t\t\t\tbottom: 0px;\n\t\t\t\tz-index: 1001;\n\t\t\t\topacity: 1;\n\t\t\t}\n\n\t\t\t.Dialog {\n\t\t\t\tbackground: #fff;\n\t\t\t\tborder: 1px solid #dedede;\n\n\t\t\t\tfont-family: Helvetica,Tahoma,Arial,sans-serif;\n\t\t\t\tfont-size: 14px;\n\t\t\t\tline-height: 1.4;\n\n\t\t\t\tmax-width: 80%;\n\t\t\t\tmax-height: 80%;\n\t\t\t\toverflow-y: auto;\n\t\t\t}\n\t\t\n\t\t\tdiv {\n\t\t\t\tmargin: 0;\n\t\t\t\tpadding: 0;\n\t\t\t\ttext-align: left;\n\t\t\t}\n\t\t\n\t\t\t.Dialog_Body {\n\t\t\t\toverflow: hidden auto;\n\t\t\t\t-webkit-overflow-scrolling: touch;\n\t\t\t\tcolor: #44484a;\n\t\t\t\tmargin: 10px;\n\t\t\t\tpadding: 20px;\n\t\t\t\tpadding-left: 20px;\n\t\t\t\tmin-height: 64px;\n\t\t\t\tmin-width: 128px;\n\t\t\t}\n\n\t\t\t.Dialog_Buttons {\n\t\t\t\ttext-align: right;\n\t\t\t\tpadding: 10px 5px 10px 10px;\n\t\t\t}\n\n\t\t\t.Dialog_Buttons a:hover {\n\t\t\t\tbackground: #224467;\n\t\t\t\tcolor: #fff;\n\t\t\t}\n\n\t\t\t.Dialog_Buttons a {\n\t\t\t\tdisplay: inline-block;\n\t\t\t\twhite-space: nowrap;\n\t\t\t\tzoom: 1;\n\t\t\t\t*display: inline;\n\t\t\t\tbackground: #516270;\n\t\t\t\tcolor: #fff;\n\t\t\t\tfont-weight: 700;\n\t\t\t\tmargin-right: 5px !important;\n\t\t\t\tmin-width: 60px;\n\t\t\t\tpadding: 10px 15px;\n\t\t\t\ttext-align: center;\n\t\t\t\ttext-decoration: none;\n\t\t\t}\n\t\t\t\n\t\t\t.Dialog * {\n\t\t\t\t-moz-box-sizing: content-box !important;\n\t\t\t\t-webkit-box-sizing: content-box !important;\n\t\t\t\tbox-sizing: content-box !important;\n\t\t\t}\n\t\t</style>\n\t\n\t\t<div class="Backdrop" style="position: fixed; left: 0px; top: 0px; opacity: 0.4;"></div>\n\n\t\t<div class="Container">\n\t\t\t<div class="Dialog">\n\t\t\t\t<div class="Dialog_Body">\n\t\t\t\t\t<slot></slot>\n\t\t\t\t</div>\n\t\t\t\t<div class="Dialog_Buttons">\n\t\t\t\t\t<a href="javascript:void(0)" id="Dialog_Button_0">Ok</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t',this.shadowRoot.getElementById("Dialog_Button_0").addEventListener("click",(t=>{this.callback(t),this.remove()}))}}customElements.define("helix-dialog",G);const j=["\n\t<h2>Fole and Raul, our heroes</h2>\n\t<p>\n\tAfter years of adventuring in deep space,\n\tFole and Raul are ready to return home.\n\t</p>\n\t<p>\n\tBut wait, what's that?\n\tThere are indiginous life forms here.\n\tThey are fluffy. And they are attacking!\n\t</p>\n\t<p>\n\tThey have no choice but to use their <b>exploding bananas</b> to blow up their defensive towers.\n\t</p>\n\t<h2>How to play</h2>\n\t<b>DRAG</b> your tile from the <b>TOP-RIGHT</b> corner.\n\t<b>ROTATE</b> before you drag, by clicking the <b>L</b> or <b>R</b> buttons.\n\tTiles can be picked up and moved.\n\tCreate a path, but be careful that the fluffs don't sabotage it.\n\tIf the fluffs get too annoying, <b>DRAG</b> them away.\n\t<p>\n\tWhen a tile gets <b>SCORCHED</b> by a laser, you can't use it anymore.\n\t<b>DRAG</b> one of the fluffs on top to get rid of it!\n\t</p>\n\t","\n<h2>Intermission</h2>\n<p>\nBoy, the geometry of this place is weird, isn't it?\nIt reminds me of creative coding. Or maybe a Dutch artist with a love for optical illusions...\n<p>",'<h2>SHAMELESS PLUG</h2>\n<p>Do you like the hexagonal music?\n</p><p>\nFollow <a href="https://twitter.com/donall">@Donall</a> on twitter!\n</p>','<h2>SHAMELESS PLUG</h2>\n<p>\nDo you want to know the backstory?\n</p><p>\nHow did our two heroes got into this mess?\nPlay <a href="https://tins.amarillion.org/entry/205/">Fole and Raul go Flower Power</a>, and find out!</p>','<h2>SHAMELESS PLUG</h2>\n<p>Did you enjoy KrampusHack?</p>\n<p>\nJoin <a href="https://tins.amarillion.org/">TINS</a> this Summer, \nan intense, 72h Game Jam by the origanizers of KrampusHack\nwhere you make a game as a gift for somebody else.\n</p>\n',"<h2>A more difficult challenge awaits</h2>\n<p>Wait... have we been here already? Perhaps, \nbut it seems like the fluff are not giving up. The fight continues, with even more intensity!</p>\n"],U=[t=>({tesselation:k.SQUARE.name,towers:[{pos:{x:650,y:300},period:1400-20*t,range:1200+20*t,bullets:[{type:"fixed",dir:270},{type:"fixed",dir:180}]}],laserPeriod:0===t?1e5:12e3-200*t,fluffPeriod:4e3-50*t,startPos:{x:150,y:150}}),t=>({tesselation:k.HEXAGONAL.name,towers:[{pos:{x:650,y:200},period:1400-20*t,range:1e3+20*t,bullets:[{type:"fixed",dir:180,phase:0},{type:"fixed",dir:240,phase:150},{type:"fixed",dir:300,phase:300}]}],laserPeriod:11e3-200*t,fluffPeriod:3e3-40*t,startPos:{x:150,y:150}}),t=>({tesselation:k.TRIANGULAR.name,towers:[{period:1700-20*t,range:1e3,pos:{x:150,y:300},bullets:[{type:"fixed",dir:330,phase:100}]},{period:1700-20*t,range:1e3,pos:{x:650,y:300},bullets:[{type:"fixed",dir:210}]}],laserPeriod:1e4-200*t,fluffPeriod:2e3-100*t,startPos:{x:400,y:150}}),t=>({tesselation:k.CAIRO.name,towers:[{period:1400-20*t,range:1e3,pos:{x:650,y:300},bullets:[{type:"fixed",dir:210},{type:"fixed",dir:150}]},{period:1400-20*t,range:1e3,pos:{x:650,y:150},bullets:[{type:"aim"}]}],laserPeriod:12e3-200*t,fluffPeriod:4e3-100*t,startPos:{x:150,y:150}}),t=>({tesselation:k.DIAMOND.name,towers:[{period:1400-20*t,range:1e3,pos:{x:100,y:100},bullets:[{type:"aim"}]},{period:1400-20*t,range:1e3,pos:{x:400,y:100},bullets:[{type:"fixed",dir:150},{type:"fixed",dir:30}]},{period:1400-20*t,range:1e3,pos:{x:700,y:100},bullets:[{type:"aim"}]}],laserPeriod:16e3-200*t,fluffPeriod:4e3-100*t,startPos:{x:400,y:350}})],B=t=>t*Math.PI/180;class z{constructor(){this.x=0,this.y=0}static distSq(t,e){const s=z.sub(t,e);return s.x*s.x+s.y*s.y}static len(t){return Math.sqrt(t.x*t.x+t.y*t.y)}static distance(t,e){const s=z.sub(t,e);return z.len(s)}static sub(t,e){return{x:t.x-e.x,y:t.y-e.y}}static add(t,e){return{x:t.x+e.x,y:t.y+e.y}}static radial(t,e){return{x:Math.cos(B(e))*t,y:Math.sin(B(e))*t}}}class H{constructor(t,e,s){this.startTime=t,this.action=e,this.remain=t+(s||0)}preUpdate(t,e){this.remain-=e,this.remain<0&&(this.action(),this.remain+=this.startTime)}}class F extends Phaser.GameObjects.Sprite{constructor(t,e,s,i,n){super(t,e,s,"crosshair-spritesheet"),this.counter=0,this.shot=!1,this.play("crosshair"),this.target=i,this.parent=n}preUpdate(t,e){if(super.preUpdate(t,e),this.counter+=e,this.counter<500)this.x=this.target.x,this.y=this.target.y,!1===this.target.active&&this.destroy();else if(this.shot)this.counter>1e3&&this.destroy();else{const t=C(Math.atan2(this.y-this.parent.y,this.x-this.parent.x));this.parent.shoot(t),this.shot=!0}}}class _ extends Phaser.GameObjects.Sprite{constructor(t,e,s){super(t,e.cx,e.cy,"endgate"),this.intervals=[],this.hp=20,this.game=t,this.config=s;for(const t of this.config.bullets){const e=new H(this.config.period,(()=>this.doProjectile(t)),t.phase);this.intervals.push(e)}}shoot(t){let e={x:this.x,y:this.y};e=z.add(e,z.radial(20,t));const s=new u(this.game,e.x,e.y,"projectile");s.lifeRemain=this.config.range,s.velocity=z.radial(50,t),this.game.bullets.add(s),this.game.spriteLayer.add(s),this.game.playEffect("sfx-cannon-shoot")}preUpdate(t,e){this.intervals.forEach((s=>s.preUpdate(t,e)))}onHit(){this.hp--,0===this.hp&&(this.game.playEffect("sfx-tower-destroyed"),this.destroy()),this.game.endReached()}doProjectile(t){if("fixed"===t.type){const e=t.dir;this.shoot(e)}else{const t=function(t){if(0!==t.length)return t[Math.floor(Math.random()*t.length)]}(this.game.bananas.getChildren().filter((t=>{const e=t,s=z.distance({x:this.x,y:this.y},{x:e.x,y:e.y});return s<300&&s>50})));if(!t)return;this.game.playEffect("sfx-cannon-target"),this.crosshair=new F(this.game,t.x,t.y,t,this),this.game.uiLayer.add(this.crosshair)}}}class q extends Phaser.GameObjects.Sprite{constructor(t,e){super(t,e.cx,e.cy,"startgate")}update(){}}class ${constructor(...t){this.inputChars=[],this.registry=t}register(t,e){this.registry.push({code:t,action:e})}onKeyPress(t){this.inputChars.push(t),this.inputChars.length>20&&this.inputChars.shift();const e=this.inputChars.join("");for(const t of this.registry){const s=e.match(t.code);if(s){this.inputChars=[],t.action(s[0]);break}}}}class K extends n().Scene{constructor(){super({key:"GameScene"}),this.keyCombo=new $({code:/iddqd/,action:()=>{this.advanceToNextLevel()}}),this.intervals=[],this.sounds={}}debugPrimaryUnitRectangle(t){const e=new(n().GameObjects.Rectangle)(this,t.xco,t.yco,t.unitSize[0]*p,t.unitSize[1]*p);e.isFilled=!1,e.isStroked=!0,e.setStrokeStyle(3,11176072,1),this.bgLayer.add(e),e.setOrigin(0,0),console.log({xco:t.xco,yco:t.yco,w:t.unitSize[0],h:t.unitSize[1],rect:e})}renderPolygons(t){for(const e of t.eachNode())for(const t of e.nodes){const{points:e}=t,s=new(n().GameObjects.Polygon)(this,0,0,e,0,1);s.setOrigin(0,0),s.isFilled=!1,s.isStroked=!0,s.setStrokeStyle(3,10526880,1),this.bgLayer.add(s),t.delegate=s}}initGates(t){this.startNode=this.findNodeAt(t.startPos.x,t.startPos.y),this.startNode.isStartNode=!0,this.setTile(this.startNode,this.tileSet[this.tileSet.length-1]);const e=new q(this,this.startNode);this.spriteLayer.add(e),this.maxScore=0;for(const e of t.towers){const t=this.findNodeAt(e.pos.x,e.pos.y);this.setTile(t,this.tileSet[this.tileSet.length-1]),t.isEndNode=!0;const s=new _(this,t,e);this.spriteLayer.add(s),this.towers.add(s),this.maxScore+=s.hp}const s=new H(t.laserPeriod,(()=>this.doLaser()));this.intervals.push(s);const i=new H(t.fluffPeriod,(()=>this.spawnFluff()));this.intervals.push(i);const n=new H(1600,(()=>this.addMob()));this.intervals.push(n)}update(t,e){super.update(t,e),this.intervals.forEach((s=>s.preUpdate(t,e))),f.overlap(this.bananas,this.bullets,((t,e)=>{t.destroy(),e.destroy(),this.playEffect("sfx-cannon-hit")}))}onRotateLeft(){this.uiBlocked||this.draggableTile&&this.draggableTile.rotateLeft()}onRotateRight(){this.uiBlocked||this.draggableTile&&this.draggableTile.rotateRight()}initUI(){const t=new(n().GameObjects.Ellipse)(this,740,60,115,115,8947848,.5);t.setStrokeStyle(2,0),this.control=t,this.uiLayer.add(t);const e=new(n().GameObjects.Text)(this,680,120,"[L]",{backgroundColor:"#00f",color:"#fff",fontSize:"32px"});e.setInteractive().on("pointerdown",(()=>this.onRotateLeft())),this.uiLayer.add(e);const s=new(n().GameObjects.Text)(this,740,120,"[R]",{backgroundColor:"#00f",color:"#fff",fontSize:"32px"});s.setInteractive().on("pointerdown",(()=>this.onRotateRight())),this.uiLayer.add(s),this.progressbar=new M({scene:this,layer:this.uiLayer,x:695,y:395,w:100,h:50})}addReusableAnimations(){this.anims.create({key:"fluff",frames:this.anims.generateFrameNumbers("fluff-spritesheet",{frames:[0,1]}),frameRate:5,repeat:-1}),this.anims.create({key:"crosshair",frames:this.anims.generateFrameNumbers("crosshair-spritesheet",{frames:[0,1]}),frameRate:20,repeat:-1}),this.anims.create({key:"laser",frames:this.anims.generateFrameNumbers("laser-spritesheet",{frames:[0,1,2]}),frameRate:1,repeat:0}),this.anims.create({key:"banana",frames:this.anims.generateFrameNumbers("banana-spritesheet",{frames:[0,1]}),frameRate:5,repeat:-1})}initLevel(){this.children.each((t=>t.destroy())),this.children.removeAll(),this.intervals=[],this.cloudLayer=this.add.layer(),this.cloudLayer.setDepth(-1),this.bgLayer=this.add.layer(),this.bgLayer.setDepth(0),this.tileLayer=this.add.layer(),this.tileLayer.setDepth(1),this.spriteLayer=this.add.layer(),this.spriteLayer.setDepth(2),this.uiLayer=this.add.layer(),this.uiLayer.setDepth(3),this.fluffs=this.add.group(),this.bananas=this.add.group(),this.bullets=this.add.group(),this.towers=this.add.group(),this.score=0;const t=U[this.level%U.length](this.level);this.tesselation=k[t.tesselation],this.grid=function(t){const{unitSize:e,links:s}=t,i=Math.ceil(12.5/e[0]),n=Math.ceil(7.03125/e[1]);let o=0;const a=new c(i,n);for(let s=0;s<n;++s){let n=0;for(let r=0;r<i;++r)a.get(r,s).addPrimitiveUnit(r,s,n,o,t,p),n+=e[0]*p;o+=e[1]*p}return a.initLinks(s),a}(this.tesselation),this.renderPolygons(this.grid),this.tileSet=T[this.tesselation.name],this.noDeadEnds=this.tileSet.filter((t=>!(t.connectionMask in{0:0,1:1,2:2,4:4,8:8,16:16,32:32,64:64}))),this.initGates(t),this.initUI(),this.updateNextTile(),(0,x.h)(null!==this.startNode);const e=j[this.level]||"";this.uiBlocked=!0,function(t,e=(()=>{})){const s=document.createElement("helix-dialog");s.innerHTML=t,s.callback=e,document.body.appendChild(s)}(`<h1>LEVEL ${this.level+1}</h1>${e}`,(()=>{this.uiBlocked=!1})),this.physics.world.on("worldbounds",(t=>{t.gameObject.destroy()}));const s=new H(2e3,(()=>this.doCloud()));this.intervals.push(s)}doCloud(){const t=new(n().GameObjects.Image)(this,810,(0,l.Iy)(450),"cloud");this.cloudLayer.add(t),this.tweens.add({targets:[t],x:-10,duration:1e4,onComplete:()=>{t.destroy()}})}advanceToNextLevel(){const t=new(n().GameObjects.Text)(this,400,225,"LEVEL COMPLETE",{color:"black",align:"center"});this.uiLayer.add(t),setTimeout((()=>{this.level++,this.initLevel(),t.destroy()}),3e3)}endReached(){this.score++,this.progressbar.refresh(this.score,this.maxScore),this.score===this.maxScore&&this.advanceToNextLevel()}debugNode(t){console.log(t);let e=0;for(const s of d.getExits(t)){const i=s[1];let n=`Exit ${e} dir: ${s[0]} node: ${s[1]} => `;for(const e of d.getExits(i))e[1]===t&&(n+=" return found");e++,console.log(n)}}addMob(){if(this.uiBlocked)return;if(this.bananas.getLength()>6)return;const t={scene:this,node:this.startNode},e=new v(t);this.bananas.add(e),this.spriteLayer.add(e)}doLaser(){const t=this.grid.randomCell(),e=(0,l.d4)(t.nodes.filter((t=>t.tile&&!t.isStartNode&&!t.isEndNode&&!t.scorched)));if(e&&e.tile){const t=new(n().GameObjects.Sprite)(this,e.cx,e.cy,"laser-spritesheet");t.setOrigin(.5,.97),t.play("laser"),this.tileLayer.add(t),e.scorchMark=t,e.scorched=!0,setTimeout((()=>{e.tile=this.tileSet[0],this.checkPath()}),2e3),setTimeout((()=>{this.playEffect("sfx-laser")}))}}spawnFluff(){let t=0;this.score>.5*this.maxScore&&(t=1),this.score>.8*this.maxScore&&(t=2);do{const t=this.grid.randomCell(),e=(0,l.d4)(t.nodes);if(e.tile){const t=new b({scene:this,node:e});this.spriteLayer.add(t),this.fluffs.add(t),this.playEffect("sfx-fluff-appear")}}while(this.fluffs.children.size<t)}findNodeAt(t,e){for(const s of this.grid.eachNode())for(const i of s.nodes){if(!i.delegate)continue;const s=i.delegate;if(n().Geom.Polygon.Contains(s.geom,t,e))return i}return null}setTile(t,e){t.tile=e;const s=new(n().GameObjects.Image)(this,t.xco,t.yco,t.tile.resKey);s.setDisplayOrigin(e.origin.x,e.origin.y),s.rotation=t.element.rotation,t.tileImg=s,t.scorched=!1,this.tileLayer.add(s),this.checkPath()}destroyTile(t){if(t.isStartNode||t.isEndNode)return;const e=t.tileImg,s=t.scorchMark;s&&s.destroy();const i=t.tile;i&&e&&(e.setPosition(t.xco-i.origin.x+i.center.x,t.yco-i.origin.y+i.center.y),e.setDisplayOrigin(i.center.x,i.center.y),this.playEffect("sfx-fluff-shake"),this.tweens.add({targets:[e,s],duration:1e3,rotation:Math.PI,scale:0,onComplete:()=>{e.destroy(),null==s||s.destroy()}}),t.tile=null,t.tileImg=null,t.scorchMark=null,t.scorched=!0)}checkPath(){}updateNextTile(){const t=(0,l.d4)(this.noDeadEnds);this.draggableTile=new D({scene:this,x:740,y:60,tile:t}),this.uiLayer.add(this.draggableTile)}create(){this.input.keyboard.on("keydown",(t=>{this.keyCombo.onKeyPress(t.key)})),this.addReusableAnimations(),this.sounds["sfx-laser"]=this.game.sound.add("sfx-laser"),this.sounds["sfx-banana-spawn"]=this.game.sound.add("sfx-banana-spawn"),this.sounds["sfx-banana-tower"]=this.game.sound.add("sfx-banana-tower"),this.sounds["sfx-cannon-shoot"]=this.game.sound.add("sfx-cannon-shoot"),this.sounds["sfx-cannon-hit"]=this.game.sound.add("sfx-cannon-hit"),this.sounds["sfx-cannon-target"]=this.game.sound.add("sfx-cannon-target"),this.sounds["sfx-tile-place"]=this.game.sound.add("sfx-tile-place"),this.sounds["sfx-tile-pickup"]=this.game.sound.add("sfx-tile-pickup"),this.sounds["sfx-tile-deny"]=this.game.sound.add("sfx-tile-deny"),this.sounds["sfx-fluff-shake"]=this.game.sound.add("sfx-fluff-shake"),this.sounds["sfx-fluff-appear"]=this.game.sound.add("sfx-fluff-appear"),this.sounds["sfx-fluff-throw"]=this.game.sound.add("sfx-fluff-throw"),this.sounds["sfx-tower-destroyed"]=this.game.sound.add("sfx-tower-destroyed"),this.level=0,this.uiBlocked=!1,R(this),this.initLevel(),this.input.on("pointerdown",(t=>{this.onDown(t)})),this.input.on("pointermove",(t=>this.onMove(t))),this.input.on("pointerup",(t=>this.onRelease(t))),this.input.on("gameout",(()=>this.onGameOut())),this.sound.add("music",{loop:!0}).play()}playEffect(t){const e=this.sounds[t];e?e.play():console.error(`sfx ${t} not found`)}controlContains(t){const e=this.control.getLocalPoint(t.x,t.y);return n().Geom.Ellipse.Contains(this.control.geom,e.x,e.y)}onDown(t){if(this.uiBlocked)return;if(this.controlContains(t))return this.dragTarget=this.draggableTile,void this.dragTarget.dragStart(t);for(const e of this.fluffs.children.getArray()){const s=e,i=s.getCenter(),n=t.x-i.x,o=t.y-i.y;if(Math.abs(n)<64&&Math.abs(o)<64)return this.dragTarget=s,void this.dragTarget.dragStart(t)}const e=this.findNodeAt(t.x,t.y);e&&e.tile&&(e.isStartNode||e.isEndNode||e.scorched?this.playEffect("sfx-tile-deny"):(this.playEffect("sfx-tile-pickup"),this.draggableTile=new D({scene:this,x:t.x,y:t.y,tile:e.tile}),this.dragTarget=this.draggableTile,this.dragTarget.dragStart(t),this.uiLayer.add(this.draggableTile),e.tile=null,e.tileImg.destroy(),e.tileImg=null,this.checkPath()))}onGameOut(){this.uiBlocked||this.dragTarget&&this.dragTarget.dragMove({x:-1,y:-1})}onMove(t){this.uiBlocked||this.dragTarget&&(t.isDown?this.dragTarget.dragMove(t):this.dragTarget.dragCancel(t))}onRelease(t){this.uiBlocked||this.dragTarget&&(this.dragTarget.dragRelease(t),this.dragTarget=null)}}function W(t,e,s,i=!1){return t.addEventListener(e,s,i),()=>{t.removeEventListener(e,s,i)}}class X extends n().Scene{constructor(){super({key:"MenuScene"})}create(){return t=this,e=void 0,i=function*(){document.querySelector("div#wrapper").setAttribute("style","display: none;"),document.querySelector("game-menu").setAttribute("style","display: visible;"),this.component=document.querySelector("game-menu"),this.unregister=[W(this.component,"Start",(()=>this.startGame()))],this.events.on("shutdown",(()=>this.shutdown()))},new((s=void 0)||(s=Promise))((function(n,o){function a(t){try{d(i.next(t))}catch(t){o(t)}}function r(t){try{d(i.throw(t))}catch(t){o(t)}}function d(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,r)}d((i=i.apply(t,e||[])).next())}));var t,e,s,i}startGame(){this.scene.start("GameScene")}shutdown(){this.unregister.forEach((t=>t())),document.querySelector("game-menu").setAttribute("style","display: none;"),document.querySelector("div#wrapper").setAttribute("style","display: visible;")}}const Y=s.p+"50d27cadd9fef9fca21e42604bfcb876.png";var V=s(592);class Q extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.render()}render(){this.shadowRoot.innerHTML=`\n\t\t<style>\n\t\t\t:host {\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: center;\n\t\t\t\talign-items: center;\n\t\t\t\theight: 100vh;\n\n\t\t\t\tbackground-image: url(${Y});\n\t\t\t\tbackground-position: center;\n\t\t\t\tbackground-repeat: no-repeat;\n\t\t\t\tbackground-size: contain;\n\t\t\t}\n\n\t\t\tbutton {\n\t\t\t\tbackground-color: #4C50AF; /* Blue */\n\t\t\t\tborder: none;\n\t\t\t\tcolor: white;\n\t\t\t\ttext-align: center;\n\t\t\t\ttext-decoration: none;\n\t\t\t\tdisplay: inline-block;\n\t\t\t\tfont-size: 16px;\n\t\t\t\tmargin: 2rem;\n\t\t\t\twidth: 10rem;\n\t\t\t\theight: 4rem;\n\t\t\t}\n\t\t\tbutton:hover {\n\t\t\t\tbackground-color: #6C70DF; /* Blue */\n\t\t\t}\n\t\t\t.main {\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: 30%;\n\t\t\t\ttop: 20%;\n\t\t\t}\n\t\t\t.qrwrapper {\n\t\t\t\tposition: absolute;\n\t\t\t\tright: 1rem;\n\t\t\t\ttop: 1rem;\n\t\t\t\ttext-align: center;\n\t\t\t}\n\t\t\t.buttonBar {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t}\n\t\t</style>\n\n\t\t<div class="main">\n\t\t\t<div class="buttonBar">\n\t\t\t\t<button id="startGame">Start Game</button>\n\t\t\t\t<button id="fullScreen">Full Screen</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="qrwrapper">\n\t\t\t<small>play on mobile!</small><br>\n\t\t\t<canvas id="qrcanvas"></canvas>\n\t\t</div>\n\t`}connectedCallback(){this.shadowRoot.querySelector("#startGame").addEventListener("click",(()=>{this.dispatchEvent(new CustomEvent("Start")),this.dispatchEvent(new CustomEvent("button-pressed"))})),this.shadowRoot.querySelector("#fullScreen").addEventListener("click",(()=>{document.documentElement.requestFullscreen({navigationUI:"show"}).then((()=>{})).catch((t=>{alert(`An error occurred while trying to switch into full-screen mode: ${t.message} (${t.name})`)}))}));const t=this.shadowRoot.getElementById("qrcanvas");V.toCanvas(t,window.location.toString(),(function(t){t&&console.error(t)}))}}class Z extends n().Scene{constructor(){super({key:"DebugTilesScene"})}preload(){}debugTilesPreview(){let t=64,e=64;for(const s of Object.keys(T).map((t=>T[t][0]))){console.log(s);const i=this.add.image(t,e,s.resKey);i.setOrigin(0,0),i.setPosition(t,e),this.add.existing(i),console.log({img:i});const n=this.add.rectangle(t,e,i.width,i.height,0);n.setOrigin(0,0),n.isFilled=!1,n.setStrokeStyle(1,255),n.isStroked=!0,this.add.circle(t+s.origin.x,e+s.origin.y,5,65535),this.add.circle(t+s.center.x,e+s.center.y,5,16711935),t+=128,t>800&&(e+=128,t=64)}this.input.on("pointermove",(t=>{console.log(t)}))}create(){R(this),this.debugTilesPreview()}}const J={type:n().AUTO,parent:"content",disableContextMenu:!0,backgroundColor:"#bbbbff",width:800,height:450,localStorageName:"tins21-amarillion",fps:{target:60},physics:{default:"arcade",arcade:{debug:!0}},scale:{mode:n().Scale.FIT,autoCenter:n().Scale.CENTER_BOTH,parent:"content"},scene:[o,K,X,Z]};class tt extends n().Game{constructor(){super(J)}}customElements.define("game-menu",Q),new tt}},s={};function i(t){var n=s[t];if(void 0!==n)return n.exports;var o=s[t]={exports:{}};return e[t].call(o.exports,o,o.exports,i),o.exports}i.m=e,t=[],i.O=(e,s,n,o)=>{if(!s){var a=1/0;for(c=0;c<t.length;c++){for(var[s,n,o]=t[c],r=!0,d=0;d<s.length;d++)(!1&o||a>=o)&&Object.keys(i.O).every((t=>i.O[t](s[d])))?s.splice(d--,1):(r=!1,o<a&&(a=o));if(r){t.splice(c--,1);var h=n();void 0!==h&&(e=h)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[s,n,o]},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");s.length&&(t=s[s.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),(()=>{var t={143:0};i.O.j=e=>0===t[e];var e=(e,s)=>{var n,o,[a,r,d]=s,h=0;if(a.some((e=>0!==t[e]))){for(n in r)i.o(r,n)&&(i.m[n]=r[n]);if(d)var c=d(i)}for(e&&e(s);h<a.length;h++)o=a[h],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(c)},s=self.webpackChunktins21_entry=self.webpackChunktins21_entry||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var n=i.O(void 0,[734],(()=>i(880)));n=i.O(n)})();